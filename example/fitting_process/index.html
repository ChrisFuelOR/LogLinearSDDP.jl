<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Model fitting and data preparation · LogLinearSDDP.jl</title><meta name="title" content="Model fitting and data preparation · LogLinearSDDP.jl"/><meta property="og:title" content="Model fitting and data preparation · LogLinearSDDP.jl"/><meta property="twitter:title" content="Model fitting and data preparation · LogLinearSDDP.jl"/><meta name="description" content="Documentation for LogLinearSDDP.jl."/><meta property="og:description" content="Documentation for LogLinearSDDP.jl."/><meta property="twitter:description" content="Documentation for LogLinearSDDP.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">LogLinearSDDP.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Code</span><ul><li><a class="tocitem" href="../../model_assumptions/">Model assumptions</a></li><li><a class="tocitem" href="../../uncertainty/">Modeling log-linear AR processes</a></li><li><a class="tocitem" href="../../cuts/">How cuts are represented in the code</a></li><li><a class="tocitem" href="../../params/">Further parameters</a></li><li><a class="tocitem" href="../../algorithm/">Implementation of the loglinearSDDP algorithm</a></li><li><a class="tocitem" href="../../usage/">How to use the code</a></li></ul></li><li><span class="tocitem">Hydrothermal Example</span><ul><li><a class="tocitem" href="../experiment_description/">Computational experiments</a></li><li><a class="tocitem" href="../setting_up_process/">Setting up the autoregressive processes</a></li><li><a class="tocitem" href="../model/">Defining the multistage problem</a></li><li><a class="tocitem" href="../running_the_model/">Running computations</a></li><li><a class="tocitem" href="../simulations/">Simulations</a></li><li><a class="tocitem" href="../markov/">Special remarks to MC-SDDP</a></li><li class="is-active"><a class="tocitem" href>Model fitting and data preparation</a></li><li><a class="tocitem" href="../logging/">Interpreting the logging results</a></li><li><a class="tocitem" href="../paper_results/">Results from our experiments</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Hydrothermal Example</a></li><li class="is-active"><a href>Model fitting and data preparation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Model fitting and data preparation</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ChrisFuelOR/LogLinearSDDP.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ChrisFuelOR/LogLinearSDDP.jl/blob/main/docs/src/example/fitting_process.jl" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Model-fitting-and-data-preparation"><a class="docs-heading-anchor" href="#Model-fitting-and-data-preparation">Model fitting and data preparation</a><a id="Model-fitting-and-data-preparation-1"></a><a class="docs-heading-anchor-permalink" href="#Model-fitting-and-data-preparation" title="Permalink"></a></h1><p>The folders <code>PreparationAutoregressive</code> and <code>PreparationAutoregressiveLinearized</code> contain files for the preparation of the AR processes and inflow realizations if either a log-linear model or a linearized model is used. In particular, they contain code to fit the models LOG-BIC, LOG-1 and LIN-FIT that we used in our experiments, whereas for LIN-SHA data from the literature is used.</p><p>For details on the methodology that is used, we refer to the electronic companion supplementing our paper. Here, we simply focus on explaining the structure of the code. We restrict to <code>PreparationAutoregressive</code>. For <code>PreparationAutoregressiveLinearized</code> the structure is very similar.</p><div class="admonition is-info" id="Remarks-bc8304f219cb23aa"><header class="admonition-header">Remarks<a class="admonition-anchor" href="#Remarks-bc8304f219cb23aa" title="Permalink"></a></header><div class="admonition-body"><p>If you simply want to reproduce the SDDP results given the pre-fitted AR models that we used, then you do not have to deal with this section at all.</p></div></div><p>The <code>PreparationAutoregressive</code> contains the following files:</p><ul><li><code>run_file.jl</code>: Using this file, we can run the preprocessing of the loglinear AR models.</li><li><code>AutoregressivePreparation.jl</code>: Contains the module definition; also defines a <code>MonthlyModelStorage</code> struct in which information is stored during the fitting process</li><li><code>data_plots.jl</code>: Contains various functions for creating plots, e.g. plotting the original or detrended inflow data, plotting (partial) autocorrelation functions, creating boxplots for model validation</li><li><code>data_preparation.jl</code>: Contains functionality to read the historical inflow data (which is stored in files <code>hist1.csv</code>, <code>hist2.csv</code>, <code>hist3.csv</code> and <code>hist4.csv</code> in folder <code>historical_data</code>), to detrend it and split it into training and validation sets.</li><li><code>data_analysis.jl</code>: Contains a function to compute the sample autocovariance for a given time series (in dataframe format) for all months and lags. This is required to compute periodical AFCs, for instance.</li><li><code>box_jenkins.jl</code>: Contains functionality to perform the Box-Jenkins method to fit an AR model to the time series data. The steps are<ul><li>Analyzing the (P)AFC to detect autocorrelation</li><li>Perform an augmented Dickey-Fuller test to test for stationarity</li><li>Fit an AR model to the time series</li><li>Use the fitted model and the residuals for validations (analyzing the goodness of fit, performing significance tests, analyzing autocorrelation and heteroscedasticity in the residuals, testing for normal distribution of the residuals).</li></ul></li><li><code>periodic_box_jenkins.jl</code>: Similar to box_jenkins.jl but more advanced as it allows us to fit periodic models were the coefficients differ between months. This is used to fit the models that we use within SDDP.<ul><li>The lag order can either be identified by using periodic AFCs or by fitting several models with different lag order (from 1 to 12) and choosing the lag order that yields the best AIC or BIC measure.</li></ul></li><li><code>forecasting.jl</code>: Contains functionality to create point forecasts as well as full scenarios (over the whole time horizon) using the fitted models. This is done for further model validation</li><li><code>ar_model_generation.jl</code>: Main file for preparing the AR model data, as it uses functions from all the previous files. The procedure works as follows:<ul><li>Iterate over all 4 reservoirs</li><li>Read the relevant data</li><li>Analyze the data using plots</li><li>Convert it to logarithmic data</li><li>Detrend the data and split it into training and validation data</li><li>Perform a (periodic) Box-Jenkins analysis to fit an AR model to the data and validate it.</li><li>Create point forecasts using the fitted model for further model validation.</li><li>Create full scenarios (over the whole time horizon) using the fitted model for further model validation.</li><li>Prepare the model output in the correct form so that it can be used as an input in our version of SDDP as well as out-of-sample simulations. Also checks are performed to assert that this is done correctly.</li></ul></li><li><code>scenario_generation.jl</code>:<ul><li>Once <code>ar_model_generation.jl</code> is finished and the process coefficients are stored correctly, this file can be used to generate a predefined number of realizations for the stagewise independent term in the AR model. These realizations are then used in <code>hydrothermal_model.jl</code> to parameterize the uncertain data.</li><li>Additionally, this file can be used to prepare the history of the stochastic process that is required in our version of SDDP.</li></ul></li></ul><p>Both <code>ar_model_generation.jl</code> (executed using <code>run-file.jl</code>) and <code>scenario_generation.jl</code> were executed before running our experiments in SDDP. Once we started our experiments in SDDP, all the inputs were fixed.</p><p>The folder <code>PreparationHistorical</code> contains files to prepare the historical data for the out-of-sample simulations.</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../markov/">« Special remarks to MC-SDDP</a><a class="docs-footer-nextpage" href="../logging/">Interpreting the logging results »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Wednesday 18 February 2026 20:32">Wednesday 18 February 2026</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
